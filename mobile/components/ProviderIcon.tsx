import React from 'react';
import { View, StyleSheet } from 'react-native';
import Svg, { Path } from 'react-native-svg';
import { borderRadius } from '../constants/theme';

export type ProviderKey = 'netflix' | 'youtube' | 'primevideo' | 'disneyplus' | 'crunchyroll' | 'hbomax';

interface SvgDef {
  viewBox: string;
  paths: { d: string; fill: string; fillRule?: 'evenodd' | 'nonzero'; clipRule?: string }[];
}

const ICONS: Record<ProviderKey, SvgDef> = {
  netflix: {
    viewBox: '0 0 24 24',
    paths: [
      { d: 'M10 1H5.5L14 22l4 1z', fill: '#E40917' },
      {
        d: 'M18 20.074V1h-4.5v6.699zM5.5 3.665V23l4.5-1v-7.217z',
        fill: '#E40917',
        fillRule: 'evenodd',
        clipRule: 'evenodd',
      },
    ],
  },
  youtube: {
    viewBox: '0 0 256 180',
    paths: [
      {
        d: 'M250.346 28.075A32.18 32.18 0 0 0 227.69 5.418C207.824 0 127.87 0 127.87 0S47.912.164 28.046 5.582A32.18 32.18 0 0 0 5.39 28.24c-6.009 35.298-8.34 89.084.165 122.97a32.18 32.18 0 0 0 22.656 22.657c19.866 5.418 99.822 5.418 99.822 5.418s79.955 0 99.82-5.418a32.18 32.18 0 0 0 22.657-22.657c6.338-35.348 8.291-89.1-.164-123.134',
        fill: '#f00',
      },
      { d: 'm102.421 128.06l66.328-38.418l-66.328-38.418z', fill: '#fff' },
    ],
  },
  primevideo: {
    viewBox: '0 0 24 24',
    paths: [
      {
        d: 'M20.182 5.404a4 4 0 0 0 .625.05a1.1 1.1 0 0 0 .342-.03a.47.47 0 0 0 .404-.306a.6.6 0 0 0 .015-.276a.4.4 0 0 0-.243-.334a.9.9 0 0 0-.281-.064a.79.79 0 0 0-.833.499a1.4 1.4 0 0 0-.102.367c-.006.088-.006.088.073.094m-1.074-.4a1.81 1.81 0 0 1 1.633-1.359a2.4 2.4 0 0 1 1.057.102c.655.224 1.009.932.794 1.59a1 1 0 0 1-.489.588a2 2 0 0 1-.66.211a3.5 3.5 0 0 1-1.207-.016a1 1 0 0 0-.146-.023a.88.88 0 0 0 .716.954a2.6 2.6 0 0 0 .995 0c.154-.033.302-.065.456-.102s.218.012.218.17v.392a.24.24 0 0 1-.18.26a3 3 0 0 1-.626.17a3.3 3.3 0 0 1-1.214-.01a1.66 1.66 0 0 1-1.36-1.272a2.94 2.94 0 0 1 .016-1.656zm.317 6.367a2.6 2.6 0 0 1 1.012.039a1.94 1.94 0 0 1 1.41 1.635v.011h-.014v.1a.08.08 0 0 0 .024.08v-.021l.007.01v.61l-.012.021v-.01c-.03.02-.02.047-.02.08V14c-.048.9-.747 1.63-1.644 1.717a2.6 2.6 0 0 1-.998-.052a1.7 1.7 0 0 1-1.246-1.114a2.83 2.83 0 0 1 0-2.005c.219-.65.8-1.11 1.482-1.175zM12 3.946q0-.065.016-.127a.16.16 0 0 1 .147-.102h.67a.19.19 0 0 1 .184.147c.028.075.044.147.07.223c.053 0 .086-.036.122-.057a2.7 2.7 0 0 1 .946-.398a2 2 0 0 1 .795 0c.25.054.47.202.615.413l.03.038v.014c.132-.079.271-.164.415-.237a2.4 2.4 0 0 1 1.203-.266a1.06 1.06 0 0 1 1.095 1.027v2.964c0 .238-.03.27-.27.27h-.647a1 1 0 0 1-.126 0a.15.15 0 0 1-.128-.122a1 1 0 0 1-.01-.175V5.101a1 1 0 0 0-.033-.293a.4.4 0 0 0-.36-.294a1.86 1.86 0 0 0-.912.176a.09.09 0 0 0-.063.096v2.788a1 1 0 0 1-.01.155c0 .07-.058.127-.128.127h-.81c-.197 0-.24-.047-.24-.243V5.1a1.2 1.2 0 0 0-.026-.276a.4.4 0 0 0-.371-.318a1.9 1.9 0 0 0-.928.18a.085.085 0 0 0-.059.103v2.833c0 .195-.044.236-.239.236h-.704c-.188 0-.235-.053-.235-.232zm2.71 9.92a.2.2 0 0 0-.074-.011a2 2 0 0 0 .057.324c.08.337.358.59.7.636a2.7 2.7 0 0 0 1.088-.037a7 7 0 0 0 .345-.085c.154-.037.223.023.223.17v.385a.235.235 0 0 1-.19.271a3.4 3.4 0 0 1-1.141.217a3 3 0 0 1-.796-.079a1.63 1.63 0 0 1-1.215-1.136a2.95 2.95 0 0 1-.02-1.776a1.85 1.85 0 0 1 1.838-1.363a2.4 2.4 0 0 1 .792.101c.44.123.775.48.868.928a1.5 1.5 0 0 1 0 .587a.98.98 0 0 1-.535.704a2.2 2.2 0 0 1-.891.23a4.2 4.2 0 0 1-1.055-.067zm-3.133-2.202c.027-.037.012-.075.012-.112V9.847c0-.202.037-.238.238-.238h.734c.161.006.207.044.207.208v5.586c0 .147-.049.201-.196.201h-.69a.19.19 0 0 1-.186-.146a.8.8 0 0 0-.057-.185c-.048.008-.069.045-.107.067a1.71 1.71 0 0 1-1.615.276A1.53 1.53 0 0 1 9 14.804a2.5 2.5 0 0 1-.266-1.13a3 3 0 0 1 .187-1.225a1.66 1.66 0 0 1 .826-.945c.552-.263 1.2-.22 1.713.111a.3.3 0 0 0 .117.059zm-.797-3.817h-.733a.3.3 0 0 1-.075 0a.147.147 0 0 1-.147-.137V3.893c0-.127.054-.176.18-.18a20 20 0 0 1 .828 0c.122 0 .159.037.17.158v3.67a1 1 0 0 1-.01.176a.134.134 0 0 1-.128.12h-.089zm-1.045-5.45a.616.616 0 0 1 .642-.586h.064a.7.7 0 0 1 .248.036a.6.6 0 0 1 .411.67a.59.59 0 0 1-.506.534a1 1 0 0 1-.355 0a.587.587 0 0 1-.504-.66Zm-3.092 5.2V3.983c0-.244.026-.27.27-.27h.51a.21.21 0 0 1 .238.179c.037.132.07.264.1.408a.16.16 0 0 0 .091-.065a4 4 0 0 1 .303-.27a1.4 1.4 0 0 1 .964-.293c.138 0 .186.048.197.18c.01.18 0 .367 0 .546a1 1 0 0 1-.012.22a.147.147 0 0 1-.147.146a2 2 0 0 1-.22 0a2.5 2.5 0 0 0-1.027.147c-.074.026-.074.079-.074.138v2.678a.13.13 0 0 1-.128.122a1 1 0 0 1-.132 0v.01h-.69a1 1 0 0 1-.117 0a.15.15 0 0 1-.126-.132zm.904 3.228a.6.6 0 0 1-.192 0a1 1 0 0 1-.176-.02a.6.6 0 0 1-.466-.7a.587.587 0 0 1 .567-.536a.5.5 0 0 1 .111 0a.64.64 0 0 1 .313.054c.208.078.35.272.361.494a.624.624 0 0 1-.518.716zm.44.855v3.764a.147.147 0 0 1-.133.159h-.88a.147.147 0 0 1-.162-.128v-.026a1 1 0 0 1 0-.1v-3.67c0-.164.045-.21.21-.21h.751c.164.007.211.054.211.218zm-1.711.047l-.317.844l-1.067 2.774c-.01.032-.027.063-.037.095a.26.26 0 0 1-.265.175h-.702a.294.294 0 0 1-.318-.218c-.133-.349-.27-.704-.403-1.055c-.318-.832-.641-1.666-.96-2.504a1 1 0 0 1-.069-.207c-.016-.105.021-.158.128-.158h.901c.128 0 .185.085.218.196c.058.201.117.408.18.61c.217.733.43 1.479.646 2.217h.01l.096-.308l.733-2.46l.031-.095a.214.214 0 0 1 .213-.147h.812c.2-.003.243.054.176.245zM1.786 3.82a.38.38 0 0 1 .318-.107h.488a.21.21 0 0 1 .234.18q.013.08.037.16a.02.02 0 0 0 .02.015a.4.4 0 0 0 .11-.08a1.87 1.87 0 0 1 1.586-.354c.48.115.874.454 1.061.91a2.5 2.5 0 0 1 .205.798h-.008c.051.444.011.893-.118 1.321a1.94 1.94 0 0 1-.55.88c-.34.306-.795.448-1.248.388A1.8 1.8 0 0 1 3 7.564c-.039.033-.022.074-.022.113v1.506c0 .329 0 .329-.334.329h-.572a.29.29 0 0 1-.294-.126Zm19.37 15.225a.6.6 0 0 1-.176.2a11.6 11.6 0 0 1-1.962 1.247a15.5 15.5 0 0 1-4.152 1.406a18 18 0 0 1-2.51.27v.022h-.649v-.018c-.293-.014-.578-.026-.868-.047a15.4 15.4 0 0 1-2.296-.352a15.56 15.56 0 0 1-6.885-3.59c-.185-.164-.36-.333-.54-.503a.4.4 0 0 1-.101-.146a.195.195 0 0 1 .098-.256a.2.2 0 0 1 .147 0a1 1 0 0 1 .138.069a20.6 20.6 0 0 0 6.164 2.546a22 22 0 0 0 2.212.398a20.4 20.4 0 0 0 3.213.146a17 17 0 0 0 1.724-.146a21 21 0 0 0 3.935-.896a19 19 0 0 0 1.973-.776a.44.44 0 0 1 .318-.043a.33.33 0 0 1 .24.398l-.022.066zm1.028 1.488a3.6 3.6 0 0 1-.615.757a.4.4 0 0 1-.17.107a.123.123 0 0 1-.169-.124a.6.6 0 0 1 .038-.162c.185-.496.366-.99.51-1.504a5.4 5.4 0 0 0 .18-.859a1.7 1.7 0 0 0 0-.318a.41.41 0 0 0-.294-.388a2 2 0 0 0-.509-.095a8.4 8.4 0 0 0-1.459.064l-.641.08c-.07 0-.132 0-.17-.065a.18.18 0 0 1 .014-.19a.6.6 0 0 1 .162-.148a3.7 3.7 0 0 1 1.299-.562a6.4 6.4 0 0 1 1.097-.121q.52.002 1.028.121a1.5 1.5 0 0 1 .276.102c.121.05.206.162.219.293a2 2 0 0 1 .014.455a5.86 5.86 0 0 1-.806 2.55zm-2.55-5.72a1 1 0 0 0 .301.01a.7.7 0 0 0 .505-.293a1 1 0 0 0 .147-.308l-.009.014a1.9 1.9 0 0 0 .074-.678a3 3 0 0 0 0-.293a1.6 1.6 0 0 0-.147-.6a.69.69 0 0 0-.483-.376a.9.9 0 0 0-.302-.01a.7.7 0 0 0-.542.328a1.2 1.2 0 0 0-.147.35a2.9 2.9 0 0 0-.042.933a1.5 1.5 0 0 0 .147.525a.68.68 0 0 0 .497.397zm-3.523-1.96a.473.473 0 0 0-.394-.64c-.026 0-.047-.01-.073-.01a.8.8 0 0 0-.775.302a1.3 1.3 0 0 0-.211.578c-.015.047.01.069.058.073a5 5 0 0 0 .642.053q.165.009.328-.026a.465.465 0 0 0 .425-.33m-5.981-.255a1.2 1.2 0 0 0-.106.26a2.7 2.7 0 0 0-.065.997a1.5 1.5 0 0 0 .147.536a.73.73 0 0 0 .568.391a1.3 1.3 0 0 0 .832-.158a.15.15 0 0 0 .086-.147v-.966h.007c0-.323-.01-.641 0-.968a.15.15 0 0 0-.096-.156a1.6 1.6 0 0 0-.817-.147a.68.68 0 0 0-.556.358M3.855 7.051a.75.75 0 0 0 .488-.188a.8.8 0 0 0 .243-.425a2.7 2.7 0 0 0 .065-1.002a1.5 1.5 0 0 0-.135-.54a.65.65 0 0 0-.505-.382a1.44 1.44 0 0 0-.912.137a.16.16 0 0 0-.105.164v1.917a.15.15 0 0 0 .09.147a1.47 1.47 0 0 0 .771.17',
        fill: '#00caf0',
      },
    ],
  },
  crunchyroll: {
    viewBox: '0 0 32 32',
    paths: [
      {
        d: 'M3.912 17.959A14.07 14.07 0 0 1 7.421 7.495a14.1 14.1 0 0 1 9.98-4.708A14.07 14.07 0 0 1 27.702 6.73a14.05 14.05 0 0 1 4.297 10.161V16c0-8.839-7.161-16-16-16s-16 7.161-16 16s7.161 16 16 16h1.068c-7.385-.521-13.115-6.645-13.156-14.041zm21.687.708c-5.749.021-7.183-7.984-1.776-9.959a10.5 10.5 0 0 0-5.156-1.239A11.2 11.2 0 0 0 8.318 14.38a11.202 11.202 0 0 0 14.636 14.636a11.2 11.2 0 0 0 6.911-10.349a8.4 8.4 0 0 0-.176-2.136a4.55 4.55 0 0 1-4.089 2.136z',
        fill: '#FF640C',
      },
    ],
  },
  disneyplus: {
    viewBox: '0 0 24 24',
    paths: [
      {
        d: 'M2.056 6.834C1.572 6.834 1 6.77 1 6.483c0-2.023 3.562-2.11 5.08-2.11c1.978 0 4.506.614 6.66 1.384c3.277 1.188 9.917 5.145 9.917 9.674c0 4.001-4.31 5.914-8.311 5.914a22 22 0 0 1-3.21-.33c-.066.243-.11.418-.264.924a4.3 4.3 0 0 1-.77.087l-.505-.043c-.33-.396-.44-1.033-.572-1.715c-2-1.165-3.298-2.155-3.891-2.836c-.506-.528-1.078-1.232-1.078-1.913c0-.351.22-.66.726-1.01c1.034-.77 2.352-1.188 4.507-1.563l.044-.9c.022-.22.242-2.573.748-3.013c.813.66.901 1.341.967 2.353c.022.44.044.901.11 1.385h.308c1.539 0 6.244.395 6.244 2.616c0 .528-.77 1.517-1.518 1.517a1.9 1.9 0 0 1-.966-.285c.329-.375.813-.704.945-.99c-.44-.528-2.814-1.143-4.551-1.143a4 4 0 0 0-.572.022l.022 4.815c.703.44 1.561.483 2.11.483c2.42 0 7.431-.417 7.431-4.331c0-3.87-4.946-6.86-8.64-8.266a21.4 21.4 0 0 0-7.937-1.496a7.2 7.2 0 0 0-1.803.198c-.373.088-.505.176-.505.264c0 .153.747.242.836.286a.22.22 0 0 1 .11.175a.26.26 0 0 1-.088.176c-.089 0-.286.022-.528.022M9.2 14.551c-2.176.177-4.595.397-4.595 1.166c0 .594 1.012 1.32 1.627 1.781a7.05 7.05 0 0 0 2.77 1.319zm11.155-9.85c-.02.428-.042.942-.042 1.723c0 .3 0 .642.01 1.027c-.042.193-.32.214-.46.278a1.2 1.2 0 0 1-.256-.192V4.83c0-.29.01-.588.01-1.038c0-.225 0-.482-.01-.792c0-.192.032-.374.15-.802a.34.34 0 0 1 .3-.224c.245.064.491.17.577.374c-.257.76-.235 1.594-.279 2.353m-.384-.085c.428.021.941.042 1.722.042c.3 0 .643 0 1.027-.01c.193.041.215.32.279.459q-.078.141-.193.257H20.1c-.289 0-.589-.01-1.037-.01c-.225 0-.482 0-.792.01c-.193.002-.375-.03-.803-.149a.35.35 0 0 1-.225-.299c.064-.246.172-.492.374-.578c.76.257 1.595.235 2.355.278z',
        fill: '#00e5ec',
      },
    ],
  },
  hbomax: {
    viewBox: '0 0 24 24',
    paths: [
      {
        d: 'M7.042 16.896H4.414v-3.754H2.708v3.754H.01L0 7.22h2.708v3.6h1.706v-3.6h2.628zm12.043.046C21.795 16.94 24 14.689 24 11.978a4.89 4.89 0 0 0-4.915-4.92c-2.707-.002-4.09 1.991-4.432 2.795c.003-1.207-1.187-2.632-2.58-2.634H7.59v9.674l4.181.001c1.686 0 2.886-1.46 2.888-2.713c.385.788 1.72 2.762 4.427 2.76zm-7.665-3.936c.387 0 .692.382.692.817s-.305.817-.692.817h-1.33v-1.634zm.005-3.633c.387 0 .692.382.692.817c0 .436-.305.818-.692.818h-1.33V9.373zm1.77 2.607c.305-.039.813-.387.992-.61c-.063.276-.068 1.074.006 1.35c-.204-.314-.688-.701-.998-.74m3.43 0a2.462 2.462 0 1 1 4.924 0a2.462 2.462 0 0 1-4.925 0zm2.462 1.936a1.936 1.936 0 1 0 0-3.872a1.936 1.936 0 0 0 0 3.872',
        fill: '#fff',
      },
    ],
  },
};

const ICON_SIZE = 24;
const CONTAINER_SIZE = 37;

interface ProviderIconProps {
  provider: ProviderKey;
  size?: number;
}

export default function ProviderIcon({ provider, size = CONTAINER_SIZE }: ProviderIconProps) {
  const icon = ICONS[provider];
  if (!icon) return null;
  const svgSize = Math.round(size * 0.62);

  return (
    <View style={[styles.container, { width: size, height: size, borderRadius: borderRadius.md }]}>
      <Svg width={svgSize} height={svgSize} viewBox={icon.viewBox}>
        {icon.paths.map((p, i) => (
          <Path
            key={i}
            d={p.d}
            fill={p.fill}
            fillRule={p.fillRule as any}
            clipRule={p.clipRule as any}
          />
        ))}
      </Svg>
    </View>
  );
}

const styles = StyleSheet.create({
  container: {
    backgroundColor: 'rgba(255, 255, 255, 0.08)',
    justifyContent: 'center',
    alignItems: 'center',
  },
});
